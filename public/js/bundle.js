(()=>{"use strict";const e=document.querySelector(".modal");function t(t){e.classList.add("show"),e.classList.remove("hide"),t&&clearTimeout(t)}function a(){e.classList.add("hide"),e.classList.remove("show")}function s(e){return e>=0&&e<10?"0"+e:e}window.addEventListener("DOMContentLoaded",(()=>{const o=setTimeout((()=>{t(o)}),6e4);(function(){const e=document.querySelector(".calculating"),t=e.querySelectorAll("[data-gender]"),a=e.querySelector(".calculating__choose_medium"),s=e.querySelectorAll("[data-ratio]"),o=e.querySelector(".calculating__result > span"),r="calculating__choose-item_active";let n="",l=0,c=0,i=0,d=0;function u(){o.textContent=n&&l&&c&&i&&d?"female"===n?Math.round((447.6+9.2*c+3.1*l-4.3*i)*d):Math.round((88.36+13.4*c+4.8*l-5.7*i)*d):"0"}localStorage.getItem("sex")?n=localStorage.getItem("sex"):(n="male",localStorage.setItem("sex",n)),localStorage.getItem("ratio")?d=localStorage.getItem("ratio"):(d=1.55,localStorage.setItem("ratio",d)),t.forEach((e=>{e.classList.remove(r),e.dataset.gender===localStorage.getItem("sex")&&e.classList.add(r)})),s.forEach((e=>{e.classList.remove(r),e.dataset.ratio===localStorage.getItem("ratio")&&e.classList.add(r)})),u(),e.addEventListener("click",(e=>{const a=e.target;a&&a.matches("[data-gender]")&&(n=a.dataset.gender,localStorage.setItem("sex",n),t.forEach((e=>e.classList.remove(r))),a.classList.add(r),u()),a&&a.matches("[data-ratio]")&&(d=a.dataset.ratio,localStorage.setItem("ratio",d),s.forEach((e=>e.classList.remove(r))),a.classList.add(r),u())})),a.addEventListener("input",(e=>{const t=e.target;if(t&&t.matches("[data-input]"))switch(t.value.match(/[^\d.]/g)?t.style.border="1px solid tomato":t.style.border="none",t.dataset.input){case"height":l=+t.value;break;case"weight":c=+t.value;break;case"age":i=+t.value}u()}))})(),function(e){class t{constructor(e,t,a,s,o,r,...n){this.src=e,this.alt=t,this.title=a,this.description=s,this.price=o,this.parent=document.querySelector(r),this.classes=n}render(){const e=document.createElement("div");0===this.classes.length&&this.classes.push("menu__item"),this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n                <img src=${this.src} alt=${this.alt} />\n                <h3 class="menu__item-subtitle">${this.title}"</h3>\n                <div class="menu__item-descr">\n                    ${this.description}\n                </div>\n                <div class="menu__item-divider"></div>\n                <div class="menu__item-price">\n                    <div class="menu__item-cost">Цена:</div>\n                    <div class="menu__item-total"><span>${this.price}</span> руб день</div>\n                </div>\n            `,this.parent.append(e)}}(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}, status: ${t.status}`);return await t.json()})(e).then((e=>{e.forEach((({img:e,altimg:a,title:s,descr:o,price:r})=>{new t(e,a,s,o,r,".menu .container").render()}))}))}("https://filgeary.github.io/demo-food-market/db.json"),function(e,s){function o(e){const o=document.querySelector(".modal__dialog");o.classList.add("hide"),t(s);const r=document.createElement("div");r.classList.add("modal__dialog"),r.innerHTML=`\n            <div class="modal__content">\n                <div data-modal-close class="modal__close">&times;</div>\n                <div class="modal__title">${e}</div>\n            </div>\n        `,document.querySelector(".modal").append(r),setTimeout((()=>{r.remove(),o.classList.add("show"),o.classList.remove("hide"),a()}),3e3)}document.querySelectorAll(e).forEach((e=>{var t;(t=e).addEventListener("submit",(e=>{e.preventDefault();let a=document.createElement("img");a.src="./img/form/spinner.svg",a.style.cssText="\n                display: block;\n                margin: 10px auto;\n            ",t.insertAdjacentElement("afterend",a);const s=new FormData(t);(async(e,t)=>{const a=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:t});return await a.json()})(0,JSON.stringify(Object.fromEntries(s.entries()))).then((e=>{console.log(e),o("Thanks for your order!"),a.remove()})).catch((e=>{console.error(e),o("! Something WRONG !")})).finally((()=>{t.reset()}))}))}))}("form",o),function(s,o,r){document.querySelectorAll(s).forEach((e=>{e.addEventListener("click",(()=>t(r)))})),e.addEventListener("click",(t=>{const s=t.target;s&&(s.matches(o)||s===e)&&a()})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&e.classList.contains("show")&&a()})),window.addEventListener("scroll",(function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(t(r),window.removeEventListener("scroll",e))}))}("[data-modal]","[data-modal-close]",o),function({container:e,slide:t,wrapper:a,inner:o,currentCounter:r,totalCounter:n,prevArrow:l,nextArrow:c}){const i=document.querySelector(e),d=i.querySelectorAll(t),u=i.querySelector(a),m=window.getComputedStyle(u).width,h=i.querySelector(o),f=i.querySelector(r),y=i.querySelector(n),v=i.querySelector(l),p=i.querySelector(c);let g=1,_=0;f.textContent=s(g),y.textContent=s(d.length),h.style.width=100*d.length+"%",h.style.display="flex",h.style.transition="0.5s all",u.style.overflow="hidden",d.forEach((e=>e.style.width=m)),p.addEventListener("click",(()=>{_==parseFloat(m)*(d.length-1)?(_=0,h.style.transition="0.1s all"):(_+=parseFloat(m),h.style.transition="0.5s all"),h.style.transform=`translateX(-${_}px)`,g=g==d.length?1:++g,f.textContent=s(g),w()})),v.addEventListener("click",(()=>{0==_?(_=parseFloat(m)*(d.length-1),h.style.transition="0.1s all"):(_-=parseFloat(m),h.style.transition="0.5s all"),h.style.transform=`translateX(-${_}px)`,g=1==g?d.length:--g,f.textContent=s(g),w()}));const S=document.createElement("ol"),L=[];S.classList.add("carousel-indicators"),i.style.position="relative",i.append(S);for(let e=0;e<d.length;e++){const t=document.createElement("li");t.setAttribute("data-slide-to",e+1),t.classList.add("dot"),t.style.opacity=0==e?1:.5,S.append(t),L.push(t)}function w(){L.forEach((e=>e.style.opacity="0.5")),L[g-1].style.opacity="1"}S.addEventListener("click",(e=>{const t=e.target;t&&t.matches("[data-slide-to]")&&(g=t.getAttribute("data-slide-to"),_=parseFloat(m)*(g-1),h.style.transform=`translateX(-${_}px)`,f.textContent=s(g),w())}))}({container:".offer__slider",slide:".offer__slide",wrapper:".offer__slider-wrapper",inner:".offer__slider-inner",currentCounter:"#current",totalCounter:"#total",prevArrow:".offer__slider-prev",nextArrow:".offer__slider-next"}),function({container:e,tabsSelector:t,tabHeaderSelector:a,tabItemsSelector:s,activeClass:o}){const r=document.querySelector(e),n=r.querySelectorAll(t),l=r.querySelector(a),c=r.querySelectorAll(s),i=()=>{n.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),c.forEach((e=>{e.classList.remove(o)}))},d=(e=0)=>{n[e].classList.add("show","fade"),n[e].classList.remove("hide"),c[e].classList.add(o)};i(),d(),l.addEventListener("click",(e=>{const t=e.target;t&&t.matches(s)&&c.forEach(((e,a)=>{t==e&&(i(),d(a))}))}))}({container:".tabcontainer",tabsSelector:".tabcontent",tabHeaderSelector:".tabheader__items",tabItemsSelector:".tabheader__item",activeClass:"tabheader__item_active"}),function(e,t){const a=document.querySelector(e),o=a.querySelector("#days"),r=a.querySelector("#hours"),n=a.querySelector("#minutes"),l=a.querySelector("#seconds"),c=setInterval(i,1e3);function i(){const e=function(e){let t=60*(new Date).getTimezoneOffset()*1e3,a=0;return t<0?(t=Math.abs(t),a=Date.parse(e)-Date.now()-t):a=t>0?Date.parse(e)-Date.now()+t:Date.parse(e)-Date.now(),{total:a,days:Math.floor(a/864e5),hours:Math.floor(a/36e5%24),minutes:Math.floor(a/6e4%60),seconds:Math.floor(a/1e3%60)}}(t);o.innerHTML=s(e.days),r.innerHTML=s(e.hours),n.innerHTML=s(e.minutes),l.innerHTML=s(e.seconds),e.total<=0&&clearInterval(c)}i()}(".timer","2022-01-01")}))})();
//# sourceMappingURL=bundle.js.map